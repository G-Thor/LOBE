{% extends "__base.jinja" %}
{% block body %}
    <div class='row'>
        <div class='col-12'>
            <h1 class='font-weight-bold'>{{collection.name}}</h1>
            <p>Stofnuð þann: {{collection.created_at | datetime(format='low')}}</p>
            <a href='{{url_for("record_session", coll_id=collection.id)}}' class='btn btn-primary float-right'>
                {{macros.btn_icon('microphone', 'r')}}
                Taka upp
            </a>
            <button type='button' class='btn btn-secondary float-right mr-2' data-toggle='modal', data-target='#addTokensModal'>
                {{macros.btn_icon('plus', 'r')}}
                Bæta við
            </button>
        </div>
    </div>
    <div class='row'>
        <div class='col-12'>
            <h3 class='font-weight-bold'>Textar</h3>
        </div>
        <div class='col-12'>
            <div class='table-responsive table-striped'>
                <table class='table table-hover'>
                    <thead>
                        <th>Texti</th>
                        <th><a href='{{url_for("collection", id=collection.id)}}?sort_by=length?ordering=ascending'>Lengd</a></th>
                        <th>Skráð þann</th>
                        <th>Fjöldi upptaka</th>
                    </thead>
                    <tbody>
                        {% for token in tokens.items %}
                            <tr class='hover-row' onclick='document.location="{{token.get_url()}}"'>
                                <td>{{token.text}}</td>
                                <td>{{token.get_length()}}</td>
                                <td>{{token.created_at}}</td>
                                <td>{{token.get_recordings().count()}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class='row'>
        <div class='col-12'>
            {{macros.pagination(tokens, 'token_list')}}
        </div>
    </div>
{% endblock %}

{% block modals %}
    <div class="modal fade" id='addTokensModal' tabindex="-1">
        <form method='POST' enctype="multipart/form-data">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Bæta við textum</h5>
                    <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                        <p>
                            Veljið eitt eða fleiri skjöl hér að neðan. Textaskjal sem inniheldur fleiri en eina línu er túlkað
                            sem margir textabútar og textaskjölin vistast sem slík (5 línur í textaskrá samsvarar 5 textum til dæmis).
                        </p>
                        {% with form=token_form %}
                            {% include '_form.jinja' %}
                        {% endwith %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Loka</button>
                    <button class='btn btn-primary' type='submit'>
                        Klára
                        <span class='ml-1'><i class='fa fa-check'></i></span>
                    </button>
                </div>
                </div>
            </div>
        </form>
    </div>
{% endblock %}